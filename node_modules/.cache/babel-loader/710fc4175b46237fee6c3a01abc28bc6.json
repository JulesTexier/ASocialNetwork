{"ast":null,"code":"import { RegisterRequest, RegisterFailure, RegisterSuccess } from 'reduxx/Register/RegisterActions';\nimport Cookies from 'js-cookie';\n\nconst fetchNews = (data, url, header) => {\n  return dispatch => {\n    dispatch(RegisterRequest(true));\n    fetch(url, {\n      method: \"post\",\n      headers: header,\n      body: JSON.stringify(data)\n    }).then(response => response.json()).then(response => {\n      if (response.status === \"error\") {\n        dispatch(RegisterFailure(response.message, false));\n      } else {\n        dispatch(RegisterSuccess(response, false));\n        console.log(response);\n        Cookies.set('token', response.jwt);\n        Cookies.set('id', response.user.id);\n        console.log(Cookies.get('id'));\n      }\n    });\n  };\n};\n\nexport default fetchNews;","map":{"version":3,"sources":["/Users/julestexier/Google_Drive/PRO/THP_NEXT/Semaine 7 - React avancé (suite)/Jour 2 - Projet Réseau social/projet_reseau copie/src/components/Api/index.jsx"],"names":["RegisterRequest","RegisterFailure","RegisterSuccess","Cookies","fetchNews","data","url","header","dispatch","fetch","method","headers","body","JSON","stringify","then","response","json","status","message","console","log","set","jwt","user","id","get"],"mappings":"AAAA,SAASA,eAAT,EAA0BC,eAA1B,EAA2CC,eAA3C,QAAkE,iCAAlE;AACA,OAAOC,OAAP,MAAoB,WAApB;;AAEA,MAAMC,SAAS,GAAG,CAACC,IAAD,EAAOC,GAAP,EAAYC,MAAZ,KAAuB;AAEvC,SAAQC,QAAD,IAAc;AACnBA,IAAAA,QAAQ,CAACR,eAAe,CAAC,IAAD,CAAhB,CAAR;AAEAS,IAAAA,KAAK,CACHH,GADG,EACG;AACJI,MAAAA,MAAM,EAAE,MADJ;AAEJC,MAAAA,OAAO,EAAEJ,MAFL;AAGJK,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeT,IAAf;AAHF,KADH,CAAL,CAOGU,IAPH,CAOSC,QAAD,IAAcA,QAAQ,CAACC,IAAT,EAPtB,EAQGF,IARH,CAQSC,QAAD,IAAc;AAClB,UAAIA,QAAQ,CAACE,MAAT,KAAoB,OAAxB,EAAiC;AAC/BV,QAAAA,QAAQ,CAACP,eAAe,CAACe,QAAQ,CAACG,OAAV,EAAmB,KAAnB,CAAhB,CAAR;AACD,OAFD,MAEO;AACLX,QAAAA,QAAQ,CAACN,eAAe,CAACc,QAAD,EAAW,KAAX,CAAhB,CAAR;AACAI,QAAAA,OAAO,CAACC,GAAR,CAAYL,QAAZ;AACAb,QAAAA,OAAO,CAACmB,GAAR,CAAY,OAAZ,EAAqBN,QAAQ,CAACO,GAA9B;AACApB,QAAAA,OAAO,CAACmB,GAAR,CAAY,IAAZ,EAAkBN,QAAQ,CAACQ,IAAT,CAAcC,EAAhC;AACAL,QAAAA,OAAO,CAACC,GAAR,CAAYlB,OAAO,CAACuB,GAAR,CAAY,IAAZ,CAAZ;AAED;AACF,KAnBH;AAoBD,GAvBD;AAwBD,CA1BD;;AA4BA,eAAetB,SAAf","sourcesContent":["import { RegisterRequest, RegisterFailure, RegisterSuccess } from 'reduxx/Register/RegisterActions';\nimport Cookies from 'js-cookie'\n\nconst fetchNews = (data, url, header) => {\n\n  return (dispatch) => {\n    dispatch(RegisterRequest(true));\n\n    fetch(\n      url , {\n        method: \"post\",\n        headers: header,\n        body: JSON.stringify(data),\n      }\n    )\n      .then((response) => response.json())\n      .then((response) => {\n        if (response.status === \"error\") {\n          dispatch(RegisterFailure(response.message, false));\n        } else {\n          dispatch(RegisterSuccess(response, false));\n          console.log(response);\n          Cookies.set('token', response.jwt);\n          Cookies.set('id', response.user.id);\n          console.log(Cookies.get('id')\n          )\n        }\n      })\n  }\n}\n\nexport default fetchNews;\n"]},"metadata":{},"sourceType":"module"}